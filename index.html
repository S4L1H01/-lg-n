<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ÃœLGÃœN - Kabile</title>
    <style>
        :root { --mor: #a29bfe; --kirmizi: #ff7675; --mavi: #74b9ff; --yesil: #55efc4; --altin: #ffeaa7; }
        * { box-sizing: border-box; touch-action: manipulation; }
        body, html { margin: 0; padding: 0; height: 100%; font-family: 'Segoe UI', sans-serif; background: #000; color: white; overflow: hidden; }

        /* GÄ°RÄ°Åž EKRANI (image_d6a521.png) */
        .ekran { display: none; height: 100vh; width: 100vw; position: absolute; top: 0; left: 0; }
        #ana-menu { display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 20px; background: #111; }
        .menu-box { width: 90%; max-width: 400px; padding: 25px; border: 5px solid; text-align: center; border-radius: 15px; font-weight: bold; font-size: 20px; }
        .box-isim { border-color: var(--mor); }
        .box-katil { border-color: var(--kirmizi); cursor: pointer; }
        .box-kur { border-color: var(--mavi); cursor: pointer; }
        input { background: transparent; border: none; border-bottom: 3px solid var(--mor); color: white; text-align: center; font-size: 20px; width: 100%; outline: none; }

        /* LOBÄ° EKRANI (image_d69642.png) - Mobil Uyumlu Grid */
        #lobi-ekrani { display: none; grid-template-columns: 1fr 1fr; grid-template-rows: 1fr 1fr 0.5fr; gap: 8px; padding: 8px; background: #222; }
        .bolge { border: 2px solid #444; border-radius: 10px; position: relative; overflow: hidden; padding: 10px; }
        #gri-bolge { grid-column: span 1; background: #333; }
        #yesil-bolge { grid-row: span 2; background: #163020; overflow-y: auto; }
        #mor-bolge { background: #2d142c; }
        #lacivert-bolge { background: #0f172a; }
        #acik-mavi-bolge { grid-column: span 2; background: #0e2a2a; display: flex; justify-content: space-around; align-items: center; }

        /* LOBÄ° KARAKTERÄ° */
        .lobi-p { position: absolute; width: 40px; height: 40px; background: #eee; border-radius: 50%; transition: 0.4s; border: 2px solid #000; }
        .lobi-label { position: absolute; top: -25px; left: 50%; transform: translateX(-50%); background: #000; font-size: 10px; padding: 2px 5px; border-radius: 4px; white-space: nowrap; }

        /* OYUN ALANI (image_d62239.png) */
        #oyun-ekrani { background: #2d5a27; }
        #ates { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 50px; z-index: 10; }
        .cadir { position: absolute; width: 80px; text-align: center; pointer-events: auto; }
        .oyuncu-govde { width: 35px; height: 35px; background: #7f8c8d; border-radius: 50%; margin: 0 auto; position: relative; border: 2px solid #000; transition: all 3.3s linear; }
        .baloncuk-ust { position: absolute; top: -30px; left: 50%; transform: translateX(-50%); background: white; color: black; font-size: 11px; padding: 2px 5px; border-radius: 4px; font-weight: bold; border: 1px solid #000; }

        /* GECE MODU */
        .gece { filter: brightness(0.2) contrast(1.2); }
        .gece .baloncuk-ust, .gece .lobi-label { display: none !important; }

        #tabela { position: fixed; top: 10px; width: 100%; text-align: center; font-size: 20px; font-weight: bold; color: var(--altin); text-shadow: 2px 2px #000; z-index: 100; }
        button { padding: 10px 20px; border-radius: 8px; border: none; font-weight: bold; cursor: pointer; }
    </style>
</head>
<body>

    <div id="ana-menu" class="ekran" style="display: flex;">
        <div class="menu-box box-isim"><input type="text" id="inp-ad" placeholder="ADINIZ"></div>
        <div class="menu-box box-katil" onclick="katil()">KOD Ä°LE KATIL</div>
        <div class="menu-box box-kur" onclick="kur()">LOBÄ° KUR</div>
    </div>

    <div id="lobi-ekrani" class="ekran">
        <div id="gri-bolge" class="bolge" onclick="lobiGit(event)">
            <div id="me" class="lobi-p"><div id="me-ad" class="lobi-label"></div></div>
        </div>
        <div id="yesil-bolge" class="bolge">
            <h4 style="color:var(--yesil); margin:0 0 10px 0;">ROLLER</h4>
            <div id="rol-list"></div>
        </div>
        <div id="mor-bolge" class="bolge">
            <input type="text" id="inp-bal" maxlength="4" placeholder="4 HARF" style="border-bottom-color:var(--mor)">
        </div>
        <div id="lacivert-bolge" class="bolge">
            G:<span id="gv">60</span> <input type="range" id="gs" min="10" max="180" value="60" oninput="gv.innerText=this.value" style="width:100%"><br>
            N:<span id="nv">30</span> <input type="range" id="ns" min="10" max="180" value="30" oninput="nv.innerText=this.value" style="width:100%">
        </div>
        <div id="acik-mavi-bolge" class="bolge">
            <b id="kod-goster">KOD: ------</b>
            <button onclick="basla()" style="background:var(--yesil)">BAÅžLA</button>
        </div>
    </div>

    <div id="oyun-ekrani" class="ekran">
        <div id="tabela">HAZIRLANIN...</div>
        <div id="ates">ðŸ”¥</div>
        <div id="oba"></div>
    </div>

    <script>
        // LOBÄ° VE GÄ°RÄ°Åž MANTIÄžI
        function kur() {
            const ad = document.getElementById('inp-ad').value;
            if(!ad) return alert("Ad gir!");
            document.getElementById('me-ad').innerText = ad;
            document.getElementById('kod-goster').innerText = "KOD: " + Math.random().toString(36).substring(2,8).toUpperCase();
            document.getElementById('ana-menu').style.display = 'none';
            document.getElementById('lobi-ekrani').style.display = 'grid';
            
            const list = document.getElementById('rol-list');
            const roller = ["ÅžifacÄ±", "BekÃ§i", "Ä°zci", "Bilge", "DirenÃ§li", "AvcÄ±", "Ä°spiyoncu", "GÃ¶lge Katil", "Kaos Katili", "KÃ¶tÃ¼ Polis", "KÃ¶tÃ¼ GÃ¶zcÃ¼", "Meczup"];
            roller.forEach(r => { list.innerHTML += `<div style="font-size:14px; margin-bottom:5px;"><input type="checkbox" checked> ${r}</div>`; });
        }

        function katil() {
            const k = prompt("Lobi Kodu:");
            if(k && k.length > 3) kur();
        }

        // LOBÄ°DE GEZÄ°NEBÄ°LÄ°R (PC ve Mobil Uyumlu)
        function lobiGit(e) {
            const me = document.getElementById('me');
            const rect = document.getElementById('gri-bolge').getBoundingClientRect();
            const x = (e.clientX || e.touches[0].clientX) - rect.left - 20;
            const y = (e.clientY || e.touches[0].clientY) - rect.top - 20;
            me.style.left = x + "px"; me.style.top = y + "px";
        }

        // OYUN Ä°Ã‡Ä° MANTIK
        function basla() {
            document.getElementById('lobi-ekrani').style.display = 'none';
            document.getElementById('oyun-ekrani').style.display = 'block';
            
            const oba = document.getElementById('oba');
            const mX = window.innerWidth / 2; const mY = window.innerHeight / 2;
            const r = Math.min(window.innerWidth, window.innerHeight) * 0.35;

            for(let i=0; i<12; i++) {
                const aci = (i * 2 * Math.PI) / 12;
                const x = mX + r * Math.cos(aci) - 40;
                const y = mY + r * Math.sin(aci) - 40;
                oba.innerHTML += `
                    <div class="cadir" style="left:${x}px; top:${y}px" onclick="rolYap(${i})">
                        <div style="font-size:40px">â›º</div>
                        <div class="oyuncu-govde" id="p-${i}">
                            <div class="baloncuk-ust">${document.getElementById('inp-bal').value || '...'}</div>
                        </div>
                    </div>`;
            }
            dongu();
        }

        // SERBEST HAREKET YOK - SADECE ROL Ä°Ã‡Ä°N GÄ°T (3.3 SANÄ°YE)
        function rolYap(id) {
            const p = document.getElementById('p-0');
            const hedef = document.querySelectorAll('.cadir')[id].getBoundingClientRect();
            const suan = p.getBoundingClientRect();
            
            p.style.position = "fixed";
            p.style.left = suan.left + "px"; p.style.top = suan.top + "px";
            
            setTimeout(() => {
                p.style.left = (hedef.left + 20) + "px";
                p.style.top = (hedef.top + 20) + "px";
            }, 50);

            setTimeout(() => {
                alert("Rol UygulandÄ±!");
                p.style.position = "relative"; p.style.left = "0"; p.style.top = "0";
            }, 3350);
        }

        function dongu() {
            let sn = parseInt(document.getElementById('gs').value);
            let mod = "GÃœNDÃœZ";
            setInterval(() => {
                sn--;
                if(sn <= 0) {
                    mod = (mod === "GÃœNDÃœZ") ? "GECE" : "GÃœNDÃœZ";
                    sn = (mod === "GÃœNDÃœZ") ? parseInt(document.getElementById('gs').value) : parseInt(document.getElementById('ns').value);
                    document.getElementById('oyun-ekrani').className = (mod === "GECE") ? "ekran gece" : "ekran";
                }
                document.getElementById('tabela').innerText = mod + ": " + sn + "s";
            }, 1000);
        }
    </script>
</body>
</html>
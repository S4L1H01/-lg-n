<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>√úLG√úN - Kabile</title>
    <style>
        :root { --mor: #a29bfe; --kirmizi: #ff7675; --mavi: #74b9ff; --yesil: #55efc4; --altin: #ffeaa7; }
        * { box-sizing: border-box; }
        body, html { margin: 0; padding: 0; height: 100%; font-family: 'Segoe UI', sans-serif; background: #000; color: white; overflow: hidden; }

        /* Gƒ∞Rƒ∞≈û EKRANI */
        .ekran { display: none; height: 100vh; width: 100vw; position: absolute; }
        #ana-menu { display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 20px; background: #111; }
        .menu-box { width: 90%; max-width: 400px; padding: 25px; border: 5px solid; text-align: center; border-radius: 15px; font-weight: bold; font-size: 20px; }
        .box-isim { border-color: var(--mor); }
        .box-katil { border-color: var(--kirmizi); cursor: pointer; }
        .box-kur { border-color: var(--mavi); cursor: pointer; }
        input { background: transparent; border: none; border-bottom: 3px solid var(--mor); color: white; text-align: center; font-size: 20px; width: 100%; outline: none; }

        /* LOBƒ∞ EKRANI */
        #lobi-ekrani { display: none; grid-template-columns: 1fr 1fr; grid-template-rows: 1fr 1fr 0.5fr; gap: 10px; padding: 10px; background: #222; }
        .bolge { border: 2px solid #444; border-radius: 10px; position: relative; overflow: hidden; padding: 10px; }
        #gri-bolge { grid-column: span 1; background: #333; }
        #yesil-bolge { grid-row: span 2; background: #163020; overflow-y: auto; }
        #acik-mavi-bolge { grid-column: span 2; background: #0e2a2a; display: flex; justify-content: space-around; align-items: center; }

        /* LOBƒ∞ KARAKTERƒ∞ */
        .lobi-p { position: absolute; width: 45px; height: 45px; background: #eee; border-radius: 50%; transition: 0.4s; border: 2px solid #000; }
        .lobi-label { position: absolute; top: -28px; left: 50%; transform: translateX(-50%); background: #000; font-size: 12px; padding: 2px 6px; border-radius: 4px; white-space: nowrap; border: 1px solid white; }

        /* OYUN ALANI */
        #oyun-ekrani { background: #2d5a27; }
        #ates { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 60px; z-index: 10; filter: drop-shadow(0 0 20px orange); }
        .cadir { position: absolute; width: 90px; text-align: center; }
        .oyuncu-govde { width: 40px; height: 40px; background: #7f8c8d; border-radius: 50%; margin: 0 auto; position: relative; border: 2px solid #000; transition: all 3.3s linear; }
        .baloncuk-ust { position: absolute; top: -35px; left: 50%; transform: translateX(-50%); background: white; color: black; font-size: 12px; padding: 3px 6px; border-radius: 5px; font-weight: bold; border: 2px solid #000; min-width: 40px; }

        /* GECE MODU */
        .gece { filter: brightness(0.2) contrast(1.2); }
        .gece .baloncuk-ust, .gece .lobi-label { display: none !important; }

        #tabela { position: fixed; top: 20px; width: 100%; text-align: center; font-size: 28px; font-weight: bold; color: var(--altin); z-index: 100; }
        button { padding: 12px 25px; border-radius: 10px; border: none; font-weight: bold; cursor: pointer; font-size: 16px; }
        .rol-item { font-size: 20px; margin-bottom: 10px; color: var(--yesil); display: flex; align-items: center; gap: 10px; }
        .rol-item input { width: 20px; height: 20px; }
    </style>
</head>
<body>

    <div id="ana-menu" class="ekran" style="display: flex;">
        <div class="menu-box box-isim"><input type="text" id="inp-ad" placeholder="ƒ∞SMƒ∞Nƒ∞Z"></div>
        <div class="menu-box box-katil" onclick="katil()">KOD ƒ∞LE KATIL</div>
        <div class="menu-box box-kur" onclick="kur()">LOBƒ∞ KUR</div>
    </div>

    <div id="lobi-ekrani" class="ekran">
        <div id="gri-bolge" class="bolge" onclick="lobiGit(event)">
            <div id="me" class="lobi-p"><div id="me-ad" class="lobi-label">Siz</div></div>
        </div>
        <div id="yesil-bolge" class="bolge">
            <h2 style="color:var(--yesil); margin-top:0;">ROLLER</h2>
            <div id="rol-list"></div>
        </div>
        <div id="mor-bolge" class="bolge">
            <h3>4 HARF BALONCUK</h3>
            <input type="text" id="inp-bal" maxlength="4" placeholder="ABCD" style="font-size:30px; border-bottom: 3px solid var(--mor);">
        </div>
        <div id="lacivert-bolge" class="bolge">
            <h3>‚òÄÔ∏è G√úND√úZ: <span id="gv">60</span>s</h3>
            <input type="range" id="gs" min="10" max="180" value="60" oninput="gv.innerText=this.value" style="width:100%"><br><br>
            <h3>üåô GECE: <span id="nv">30</span>s</h3>
            <input type="range" id="ns" min="10" max="180" value="30" oninput="nv.innerText=this.value" style="width:100%">
        </div>
        <div id="acik-mavi-bolge" class="bolge">
            <h2 id="kod-goster" style="color:var(--mavi)">KOD: ------</h2>
            <button onclick="basla()" style="background:var(--yesil); color: black; font-size: 20px;">OYUNU BA≈ûLAT</button>
        </div>
    </div>

    <div id="oyun-ekrani" class="ekran">
        <div id="tabela">OBADA TOPLANILIYOR...</div>
        <div id="ates">üî•</div>
        <div id="oba"></div>
    </div>

    <script>
        function kur() {
            const ad = document.getElementById('inp-ad').value;
            if(!ad) return alert("ƒ∞sim yazmalƒ±sƒ±n!");
            document.getElementById('me-ad').innerText = ad;
            document.getElementById('kod-goster').innerText = "KOD: " + Math.random().toString(36).substring(2,8).toUpperCase();
            document.getElementById('ana-menu').style.display = 'none';
            document.getElementById('lobi-ekrani').style.display = 'grid';
            
            const list = document.getElementById('rol-list');
            const roller = ["≈ûifacƒ±", "Bek√ßi", "ƒ∞zci", "Bilge", "Diren√ßli", "Avcƒ±", "ƒ∞spiyoncu", "G√∂lge Katil", "Kaos Katili", "K√∂t√º Polis", "K√∂t√º G√∂zc√º", "Meczup"];
            list.innerHTML = "";
            roller.forEach(r => { list.innerHTML += `<div class="rol-item"><input type="checkbox" checked> ${r}</div>`; });
        }

        function katil() {
            const k = prompt("Lobi Kodunu Girin:");
            if(k) kur();
        }

        function lobiGit(e) {
            const me = document.getElementById('me');
            const rect = document.getElementById('gri-bolge').getBoundingClientRect();
            const x = (e.clientX || (e.touches ? e.touches[0].clientX : 0)) - rect.left - 22;
            const y = (e.clientY || (e.touches ? e.touches[0].clientY : 0)) - rect.top - 22;
            me.style.left = x + "px"; me.style.top = y + "px";
        }

        function basla() {
            const bal = document.getElementById('inp-bal').value || "USER";
            document.getElementById('lobi-ekrani').style.display = 'none';
            document.getElementById('oyun-ekrani').style.display = 'block';
            
            const oba = document.getElementById('oba');
            const mX = window.innerWidth / 2; const mY = window.innerHeight / 2;
            const r = Math.min(window.innerWidth, window.innerHeight) * 0.35;

            oba.innerHTML = "";
            for(let i=0; i<12; i++) {
                const aci = (i * 2 * Math.PI) / 12;
                const x = mX + r * Math.cos(aci) - 45;
                const y = mY + r * Math.sin(aci) - 45;
                // Her oyuncuya kendi yazdƒ±ƒüƒ± baloncuk ismini (veya √∂rnek isimleri) veriyoruz
                const oyuncuBal = (i === 0) ? bal : "OY"+(i+1); 
                oba.innerHTML += `
                    <div class="cadir" style="left:${x}px; top:${y}px" onclick="rolYap(${i})">
                        <div style="font-size:50px">‚õ∫</div>
                        <div class="oyuncu-govde" id="p-${i}">
                            <div class="baloncuk-ust">${oyuncuBal}</div>
                        </div>
                    </div>`;
            }
            dongu();
        }

        function rolYap(id) {
            const p = document.getElementById('p-0');
            const hedef = document.querySelectorAll('.cadir')[id].getBoundingClientRect();
            const suan = p.getBoundingClientRect();
            
            p.style.position = "fixed";
            p.style.left = suan.left + "px"; p.style.top = suan.top + "px";
            
            setTimeout(() => {
                p.style.left = (hedef.left + 25) + "px";
                p.style.top = (hedef.top + 25) + "px";
            }, 50);

            setTimeout(() => {
                p.style.position = "relative"; p.style.left = "0"; p.style.top = "0";
            }, 3350);
        }

        function dongu() {
            let sn = parseInt(document.getElementById('gs').value);
            let mod = "G√úND√úZ";
            setInterval(() => {
                sn--;
                if(sn <= 0) {
                    mod = (mod === "G√úND√úZ") ? "GECE" : "G√úND√úZ";
                    sn = (mod === "G√úND√úZ") ? parseInt(document.getElementById('gs').value) : parseInt(document.getElementById('ns').value);
                    document.getElementById('oyun-ekrani').className = (mod === "GECE") ? "ekran gece" : "ekran";
                }
                const ikon = (mod === "G√úND√úZ") ? "‚òÄÔ∏è" : "üåô";
                document.getElementById('tabela').innerText = ikon + " " + mod + ": " + sn + "s";
            }, 1000);
        }
    </script>
</body>
</html>
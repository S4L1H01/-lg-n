<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>ÃœlgÃ¼n: Kabile SÄ±rlarÄ±</title>
    <style>
        :root { --bg: #1a1a1a; --kabile: #1a3c1a; --text: #f0e68c; }
        body, html { margin: 0; padding: 0; height: 100%; font-family: sans-serif; overflow: hidden; background: var(--bg); color: var(--text); }
        
        /* 1. GÄ°RÄ°Åž EKRANI (image_d6a521.png) */
        #giris-ekrani { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; gap: 20px; }
        .box { width: 300px; padding: 20px; border: 3px solid; text-align: center; cursor: pointer; background: rgba(255,255,255,0.05); }
        .box-isim { border-color: purple; } .box-katil { border-color: darkred; } .box-kur { border-color: blue; }
        input { background: transparent; border: 1px solid #555; color: white; padding: 10px; width: 80%; }

        /* 2. LOBÄ° EKRANI (image_d69642.png) */
        #lobi-ekrani { display: none; grid-template-columns: 2fr 1fr; grid-template-rows: 2fr 1fr 1fr; height: 100vh; }
        .bolge { border: 1px solid #444; padding: 10px; position: relative; overflow: hidden; }
        #gri-bolge { background: #222; } /* Karakter gezdirme alanÄ± */
        #yesil-bolge { grid-row: span 2; background: #1a2e1a; } /* Roller */
        #mor-bolge { background: #2e1a2e; } /* Nick/Baloncuk ayarÄ± */
        #lacivert-bolge { background: #1a1a2e; } /* SÃ¼re/SayÄ± ayarlarÄ± */
        #acik-mavi-bolge { background: #1a2e2e; display: flex; gap: 10px; align-items: center; }

        /* 3. OBA/OYUN ALANI (image_d62239.png) */
        #oyun-ekrani { display: none; background: #2d5a27; height: 100vh; position: relative; }
        #ates { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 50px; z-index: 5; }
        .cadir { position: absolute; width: 80px; text-align: center; }
        .oyuncu { width: 30px; height: 30px; background: gray; border-radius: 50%; margin: 0 auto; position: relative; transition: all 3.3s linear; }
        .baloncuk { position: absolute; top: -25px; left: 50%; transform: translateX(-50%); background: white; color: black; font-size: 10px; padding: 2px; border-radius: 3px; font-weight: bold; }
        .oy-sayisi { position: absolute; top: -45px; left: 50%; transform: translateX(-50%); width: 15px; height: 15px; background: black; border-radius: 50%; border: 1px solid white; display: none; }

        .gece { filter: brightness(0.3) contrast(1.2); }
        .gece .baloncuk, .gece .nick-label { display: none !important; }
        
        button { padding: 10px; cursor: pointer; background: #444; color: white; border: none; }
        button:hover { background: #666; }
    </style>
</head>
<body>

    <div id="giris-ekrani">
        <div class="box box-isim"><input type="text" id="p-isim" placeholder="Ä°SÄ°M YAZINIZ"></div>
        <div class="box box-katil" onclick="kodlaKatil()">KOD Ä°LE KATIL</div>
        <div class="box box-kur" onclick="lobiKur()">LOBÄ° KUR</div>
    </div>

    <div id="lobi-ekrani">
        <div id="gri-bolge" class="bolge">
            <div id="lobi-karakter" class="oyuncu" style="position:absolute; transition: all 0.5s ease;"></div>
            <p style="font-size: 10px;">Lobide gezebilirsiniz (TÄ±kla ve Git)</p>
        </div>
        <div id="yesil-bolge" class="bolge">
            <h3>ROLLER (YEÅžÄ°L)</h3>
            <div id="rol-listesi"></div>
        </div>
        <div id="mor-bolge" class="bolge">
            <h3>Ã–ZELLEÅžTÄ°R (MOR)</h3>
            <input type="text" id="p-baloncuk" maxlength="4" placeholder="4 Harf Baloncuk">
        </div>
        <div id="acik-mavi-bolge" class="bolge">
            <span id="lobi-kodu-display">KOD: ------</span>
            <button onclick="oyunuBaslat()">OYUNU BAÅžLAT</button>
            <button onclick="location.reload()">Ã‡IKIÅž</button>
        </div>
        <div id="lacivert-bolge" class="bolge">
            <h3>AYARLAR (LACÄ°VERT)</h3>
            GÃ¼ndÃ¼z: <input type="range" id="g-sure" min="10" max="120" value="60"> <br>
            Gece: <input type="range" id="n-sure" min="10" max="120" value="30">
        </div>
    </div>

    <div id="oyun-ekrani">
        <div id="ates">ðŸ”¥</div>
        <div id="oba-alan"></div>
        <div id="alt-bilgi" style="position:fixed; bottom:10px; left:10px; background:rgba(0,0,0,0.5); padding:10px;"></div>
    </div>

    <script>
        let lobiKodu = "";
        let roller = ["ÅžifacÄ±", "BekÃ§i", "Ä°zci", "Bilge", "DirenÃ§li", "AvcÄ±", "Ä°spiyoncu", "GÃ¶lge Katil", "Kaos Katili", "KÃ¶tÃ¼ Polis", "KÃ¶tÃ¼ GÃ¶zcÃ¼", "Meczup"];
        let oyuncular = [];

        // GÄ°RÄ°Åž FONKSÄ°YONLARI
        function lobiKur() {
            const isim = document.getElementById('p-isim').value;
            if(!isim) return alert("Ä°sim yazmalÄ±sÄ±n!");
            lobiKodu = Math.random().toString(36).substring(2, 8).toUpperCase();
            document.getElementById('lobi-kodu-display').innerText = "KOD: " + lobiKodu;
            document.getElementById('giris-ekrani').style.display = 'none';
            document.getElementById('lobi-ekrani').style.display = 'grid';
            
            // Rol listesini oluÅŸtur
            const list = document.getElementById('rol-listesi');
            roller.forEach(r => {
                list.innerHTML += `<div><input type="checkbox" checked> ${r}</div>`;
            });
        }

        function kodlaKatil() {
            let kod = prompt("6 Haneli Lobi Kodunu Girin:");
            if(kod && kod.length === 6) lobiKur();
        }

        // LOBÄ°DE GEZÄ°NME (Gri BÃ¶lge)
        document.getElementById('gri-bolge').onclick = function(e) {
            const char = document.getElementById('lobi-karakter');
            char.style.left = (e.clientX - 15) + "px";
            char.style.top = (e.clientY - 15) + "px";
        };

        // OYUNU BAÅžLATMA (Oba Kurulumu)
        function oyunuBaslat() {
            document.getElementById('lobi-ekrani').style.display = 'none';
            document.getElementById('oyun-ekrani').style.display = 'block';
            obaOlustur(12); // Max 12 Ã§adÄ±r
        }

        function obaOlustur(sayi) {
            const alan = document.getElementById('oba-alan');
            const merkezX = window.innerWidth / 2;
            const merkezY = window.innerHeight / 2;
            const yaricap = 250;

            for (let i = 0; i < sayi; i++) {
                const aci = (i * 2 * Math.PI) / sayi;
                const x = merkezX + yaricap * Math.cos(aci) - 40;
                const y = merkezY + yaricap * Math.sin(aci) - 40;

                alan.innerHTML += `
                    <div class="cadir" style="left:${x}px; top:${y}px" onclick="rolKullan(${i})">
                        <div class="oy-sayisi"></div>
                        <div style="font-size:40px">â›º</div>
                        <div class="oyuncu" id="oyuncu-${i}">
                            <div class="baloncuk">${document.getElementById('p-baloncuk').value || '???'}</div>
                        </div>
                        <div class="nick-label">${document.getElementById('p-isim').value}</div>
                    </div>`;
            }
        }

        // 3.3 SANÄ°YE YÃœRÃœME MEKANÄ°ÄžÄ°
        function rolKullan(id) {
            const oyuncu = document.getElementById('oyuncu-0'); // Kendi karakterimiz
            const hedefCadir = document.querySelectorAll('.cadir')[id];
            
            // Hedefe yÃ¼rÃ¼
            oyuncu.style.position = "fixed";
            const rect = hedefCadir.getBoundingClientRect();
            oyuncu.style.left = rect.left + "px";
            oyuncu.style.top = rect.top + "px";

            document.getElementById('alt-bilgi').innerText = "Ã–zellik kullanÄ±lÄ±yor... (3.3s)";
            
            setTimeout(() => {
                alert("Yetenek uygulandÄ±!");
                // Ã‡adÄ±ra geri dÃ¶n
                oyuncu.style.left = ""; 
                oyuncu.style.top = "";
            }, 3300);
        }

        // GECE/GÃœNDÃœZ DÃ–NGÃœSÃœ
        setInterval(() => {
            const ekran = document.getElementById('oyun-ekrani');
            ekran.classList.toggle('gece');
        }, 15000); // Test iÃ§in her 15 saniyede bir deÄŸiÅŸir
    </script>
</body>
</html>